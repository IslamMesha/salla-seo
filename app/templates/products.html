{% load custom_filters %} {% load static %}


<!-- <i class="fas fa-clock text-blue-800"></i> -->

<div class="products pt-12 flex flex-wrap">
  {% for product in products %}
  <div
    class="product overflow-hidden shadow-md bg-white w-56 rounded-md overflow-hidden mb-4 flex-shrink-0 flex-grow mx-2 flex flex-col"
  >
    <div
      id="product-{{ forloop.counter }}"
      class="product-image image-container"
    >
      <img
        class="block m-auto h-80 object-cover relative"
        src="{{ product.main_image }}"
        alt="Product Image"
      />

      <style>
        #product-{{ forloop.counter }} {
          position: relative;
          width: 100%;
          display: flex;
          overflow: hidden;
        }

        #product-{{ forloop.counter }}:before {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-image: url({{ product.main_image }});
          background-size: cover;
          filter: blur(8px);
          z-index: 0;
          background-position: center;
          transform: scale(1.3);
        }
        #product-{{ forloop.counter }} img {
          height: 85%;
        }
      </style>
    </div>
    <div class="product-info px-4 py-5">
      <h3 class="font-bold mb-2">معلومات المنتج</h3>

      <div>
        <label class="text-gray-400 font-bold text-xs" for="">اسم المنتج</label>
        <p class="product-seo-title break-all mb-3">{{ product.name }}</p>
      </div>
      <div>
        <label class="text-gray-400 font-bold text-xs" for="">وصف المنتج</label>
        <p class="product-description text-sm break-all">
          {{ product.description }}
        </p>
      </div>
    </div>
    <div class="product-seo-info px-4">
      <h3 class="font-bold mb-2">معلومات السيو</h3>

      <div>
        <label class="text-gray-400 font-bold text-xs" for="">عنوان السيو (الخاص بمحرك البحث)</label>
        <p class="product-seo-title break-all mb-3">
          {% if product.metadata.title %} {{ product.metadata.title }} {% else %} غير معرف {% endif %}
        </p>
      </div>
      <div>
        <label class="text-gray-400 font-bold text-xs" for="">وصف السيو (الخاص بمحرك البحث)</label>
        <p class="product-seo-description break-all">
          {% if product.metadata.description %} {{ product.metadata.description}} 
          {% else %} غير معرف {% endif %}
        </p>
      </div>
    </div>

    <div class="keywords px-4 py-5" style="font-size: 0">
      <div>
        {% for keyword in keywords %}
        <span
          class="keyword text-sm text-center px-1 py-1 bg-yellow-300 rounded font-bold mr-1 mb-1 inline-block"
        >
          {{ keyword }}<!--
                    --><span
            class="delete-keyword rounded inline-block text-white font-bold bg-red-500 w-4 text-center ml-1"
            >&times;</span
          >
        </span>
        {% endfor %}
      </div>

      <div class="flex rounded mt-2 overflow-hidden">
        <input
          type="text"
          class="border-2 border-solid border-gray-300 w-full p-1 text-sm flex-grow outline-none"
          placeholder="Add a keyword"
        />
        <button
          class="add-keyword text-sm py-1 px-2 font-bold text-white bg-blue-500 hover:bg-blue-700 flex-shrink-0 flex-grow-0"
        >
          Add
        </button>
      </div>
    </div>

    <div class="bottom-0 flex-grow flex flex-col-reverse">
      <button
        class="block bg-blue-500 hover:bg-blue-700 w-full font-bold text-white py-2 bottom-0"
        data-product-id="{{ product.id }}"
        data-url="{% url 'app:list_descriptions' product.id %}"
      >
        List Old Descriptions
      </button>

      <button
        class="block bg-red-500 hover:bg-red-700 w-full font-bold text-white py-2 bottom-0"
        data-product="{{ product|to_json }}"
      >
        Get Description
      </button>
    </div>
  </div>
  {% endfor %}
</div>

<nav class="bg-gray-100 px-4 py-3 flex items-center justify-center">
  <ul class="flex space-x-2">
    {% if pagination.currentPage > 1 %}
    <li>
      <a
        href="?page={{ pagination.currentPage|minus }}"
        class="bg-gray-300 hover:bg-gray-400 px-2 py-1 rounded"
      >
        {{ pagination.currentPage|minus }}
      </a>
    </li>
    {% endif %}

    <li>
      <a
        href="?page={{ pagination.currentPage }}"
        class="bg-gray-300 hover:bg-gray-400 px-2 py-1 rounded current-page"
      >
        {{ pagination.currentPage }}
      </a>
    </li>
    {% if pagination.currentPage < pagination.totalPages %}
    <li>
      <a
        href="?page={{ pagination.currentPage|plus }}"
        class="bg-gray-300 hover:bg-gray-400 px-2 py-1 rounded"
      >
        {{ pagination.currentPage|plus }}
      </a>
    </li>
    {% endif %}
  </ul>
</nav>

<script src="{% static 'js/products.js' %}"></script>
